
<footer>
   <div class="tt-footer-default tt-color-scheme-02">
        <div class="container">
            <div class="row" style="    place-content: center;">
                <ul class="tt-social-icon">
                    <li><a class="icon-g-64" target="_blank" href="http://www.facebook.com/"></a></li>
                    <li><a class="icon-h-58" target="_blank" href="http://www.facebook.com/"></a></li>
                    <li><a class="icon-g-66" target="_blank" href="http://www.twitter.com/"></a></li>
                    <li><a class="icon-g-67" target="_blank" href="http://www.google.com/"></a></li>
                    <li><a class="icon-g-70" target="_blank" href="https://instagram.com/"></a></li>
                </ul>
            </div>
        </div>
    </div>
    <div class="tt-footer-col tt-color-scheme-01">
        <div class="container">
            <div class="row">
                <div class="col-md-6 col-lg-4 col-xl-4">
                    <div class="tt-mobile-collapse">
                        <a class="tt-logo tt-logo-alignment" href="/">
                            <img src="http://localhost:8000/assets/img/logos/logo-w.png" alt="" class="loading" data-was-processed="true">
                        </a>

                    </div>
                </div>
                <div class="col-md-6 col-lg-4 col-xl-4">
                    <div class="tt-mobile-collapse">
                        <h4 class="tt-collapse-title">
                            HAKKIMIZDA
                        </h4>
                        <div class="tt-collapse-content">
                            <p>
                                Lorem ipsum dolor sit amet conse ctetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore. Lorem ipsum dolor sit amet conse ctetur adipisicing elit, seddo eiusmod tempor incididunt ut labore etdolore.
                            </p>
                        </div>
                    </div>
                </div>
                <div class="col-md-6 col-lg-4 col-xl-4">
                    <div class="tt-newsletter">
                        <div class="tt-mobile-collapse">
                            <h4 class="tt-collapse-title">
                                İLETİŞİM BİLGİLERİ
                            </h4>
                            <div class="tt-collapse-content">
                                <address style="color:#777777;">
                                    <p><span>Adres:</span> Mahmutbey, 6. Yol Sk. No:8,Bağcılar/İstanbul, 34218, Türkiye</p>
                                    <p><span>Telefon:</span> +777 2345 7885;  +777 2345 7886</p>
                                    <p><span>Çalışma Saatlerı:</span>PAZARTESI - CUMARTESI / 8:00 - 19:00</p>
                                    <p><span>E-mail:</span> <a href="mailto:info@takisik.com">info@takisik.com</a></p>
                                </address>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="tt-footer-custom">
        <div class="container">
            <div class="tt-row">
                <div class="tt-col-left">
                    <div class="tt-col-item">
                        <!-- copyright -->
                        <div class="tt-box-copyright">
                            © <a href="https://fikitech.com/">FikiTech Solutions</a> 2023. All Rights Reserved
                        </div>
                        <!-- /copyright -->
                    </div>
                </div>
                </div>
            </div>
    </div>
</footer>
<a href="#" class="tt-back-to-top">EN BAŞA DÖN</a>
<!-- modal (AddToCartProduct) -->
<div class="modal  fade"  id="modalAddToCartProduct" >
    <div class="modal-dialog">
        <div class="modal-content ">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-hidden="true"><span class="icon icon-clear"></span></button>
            </div>
            <div class="modal-body" id="add-complete-body">


            </div>
        </div>
    </div>
</div>

<!-- modal (quickViewModal) -->
<div class="modal  fade"  id="ModalquickView" tabindex="-1" role="dialog" aria-label="myModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg">
        <div class="modal-content ">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-hidden="true"><span class="icon icon-clear"></span></button>
            </div>

            <div class="modal-body"  id="quick-view-body" >

            </div>
        </div>
    </div>
</div>

<!-- modal (ModalSubsribeGood) -->
<div class="modal  fade"  id="ModalSubsribeGood" tabindex="-1" role="dialog" aria-label="myModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-xs">
        <div class="modal-content ">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-hidden="true"><span class="icon icon-clear"></span></button>
            </div>
            <div class="modal-body">
                <div class="tt-modal-subsribe-good">
                    <i class="icon-f-68"></i> You have successfully signed!
                </div>
            </div>
        </div>
    </div>
</div>

<!-- modal (DeleteItemsModal) -->
<div class="modal  fade"  id="DeleteItemsModal" tabindex="-1" role="dialog" aria-label="myModalLabel" aria-hidden="true" >
    <div class="modal-dialog">
        <div class="modal-content ">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-hidden="true" id="close-delete-modal"><span class="icon icon-clear"></span></button>
            </div>
            <div class="modal-body" id="delete-item-body">
                <div class="tt-modal-addtocart delete-item desctope">
                    <div class="row">
                        <div class="col-12 col-lg-12">
                            <div class="delete-item-modal-text" id="delete-item-modal-text"></div>
                            </a>
                            <div class="row">
                                <div class="col-md-6 mt-3">
                                    <a href="#" class="btn btn-border btn-close-popup" data-toggle="modal" data-target="ModalDeleteSuccess" id="delete-item">SİL</a>
                                </div>
                                <div class="col-md-6 mt-3">
                                    <a href="shopping_cart_02.html" class="btn btn-border" data-dismiss="modal">VAZGEÇ</a>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- modal (EmptyCartModal) -->
<div class="modal  fade"  id="EmptyCartModal" tabindex="-1" role="dialog" aria-label="myModalLabel" aria-hidden="true" >
    <div class="modal-dialog">
        <div class="modal-content ">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-hidden="true" id="close-empty-cart-modal"><span class="icon icon-clear"></span></button>
            </div>
            <div class="modal-body" id="empty-cart-body">
                <div class="tt-modal-addtocart empty-cart desctope">
                    <div class="row">
                        <div class="col-12 col-lg-12">
                            <div class="empty-cart-modal-text" id="empty-cart-modal-text"></div>
                            </a>
                            <div class="row">
                                <div class="col-md-6 mt-3">
                                    <a href="#" class="btn btn-border btn-close-popup" data-toggle="modal" data-target="ModalDeleteSuccess" id="empty-cart">SİL</a>
                                </div>
                                <div class="col-md-6 mt-3">
                                    <a  class="btn btn-border" data-dismiss="modal">VAZGEÇ</a>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- modal (NewAddressModal) -->
<div class="modal  fade"  id="NewAddressModal" tabindex="-1" role="dialog" aria-label="myModalLabel" aria-hidden="true" >
    <div class="modal-dialog modal-md">
        <div class="modal-content ">
            <div class="modal-header">
                <h3 class="tt-title">YENİ ADRES EKLE</h3>
                <button type="button" class="close" data-dismiss="modal" aria-hidden="true" id="close-new-address-modal"><span class="icon icon-clear"></span></button>
            </div>
            <div class="modal-body" id="empty-cart-body"><div class="tt-wrapper">
                    <div class="form-default">
                        <div  class="form-default needs-validation" id="new_address_form">
                            @csrf
                            <div class="form-group form-group-address">
                                <label class="control-label">ADRES TÜRÜ*</label>
                                <select class="form-control form-new-address-fields" id="address_type" name="address_type" required>
                                    <option value="1" selected>Kargo Adresi</option>
                                    <option value="2">Fatura Adresi</option>
                                </select>
                            </div>
                            <div class="form-group form-group-address">
                                <label for="address_title" class="control-label">ADRES BAŞLIĞI*</label>
                                <input type="text" class="form-control form-new-address-fields" id="address_title"   name="address_title"  pattern="[a-zA-Z]{3}[a-zA-Z ]{1,30}" required>
                            </div>
                            <div class="row">
                                <div class="form-group form-group-address col-md-6">
                                    <label for="city" class="control-label">İL*</label>
                                    <select class="form-control form-new-address-fields" id="city" name="city" required>
                                        <option value="" >Seçiniz</option>
                                    </select>
                                </div>
                                <div class="form-group form-group-address col-md-6">
                                    <label for="district" class="control-label">İLÇE*</label>
                                    <select class="form-control form-new-address-fields" id="district"  name="district" disabled="disabled" required>
                                        <option value="" >Seçiniz</option>
                                    </select>
                                </div>
                            </div>
                            <div class="row">
                                <div class="form-group form-group-address col-md-6">
                                    <label for="neighbourhood" class="control-label">MAHALLE*</label>
                                    <select class="form-control form-new-address-fields" id="neighbourhood" name="neighbourhood" disabled="disabled" required>
                                        <option value="" >Seçiniz</option>
                                    </select>
                                </div>
                                <div class="form-group form-group-address col-md-6">
                                    <label for="zip" class="control-label">ZIP*</label>
                                    <input type="text" class="form-control form-new-address-fields" id="zip" name="zip" required>
                                </div>
                            </div>
                            <div class="form-group form-group-address">
                                <label for="address" class="control-label">ADRES*</label>
                                <input type="text" class="form-control form-new-address-fields" id="address" name="address" required>
                            </div>
                            <input type="text" class=" form-new-address-fields" value="{{Session::get('website.user.user_info')->user_id}}" id="user_id" name="user_id" required hidden>
                            <button  class="btn w-100" onclick="AddNewAddress()">ADRES EKLE</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- modal (UpdateAddressModal) -->
<div class="modal  fade"  id="UpdateAddressModal" tabindex="-1" role="dialog" aria-label="myModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg">
        <div class="modal-content ">
            <div class="modal-header">
                <h3 class="tt-title">ADRES DÜZENLE</h3>
                <button type="button" class="close" data-dismiss="modal" aria-hidden="true"><span class="icon icon-clear"></span></button>
            </div>

            <div class="modal-body"  id="update-address-body" >

            </div>
        </div>
    </div>
</div>
<!-- modal (DeleteAddressModal) -->
<div class="modal  fade"  id="DeleteAddressModal" tabindex="-1" role="dialog" aria-label="myModalLabel" aria-hidden="true" >
    <div class="modal-dialog">
        <div class="modal-content ">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-hidden="true" id="close-delete-modal"><span class="icon icon-clear"></span></button>
            </div>
            <div class="modal-body" id="delete-item-body">
                <div class="tt-modal-addtocart delete-address desctope">
                    <div class="row">
                        <div class="col-12 col-lg-12">
                            <div class="delete-address-modal-text" id="delete-address-modal-text"></div>
                            </a>
                            <div class="row">
                                <div class="col-md-6 mt-3">
                                    <a href="#" class="btn btn-border btn-close-popup" data-toggle="modal" data-target="ModalDeleteSuccess" id="delete-address">SİL</a>
                                </div>
                                <div class="col-md-6 mt-3">
                                    <a  class="btn btn-border" data-dismiss="modal">VAZGEÇ</a>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<!-- modal (ModalDeleteSuccess) -->
<div class="modal  fade"  id="ModalDeleteSuccess" tabindex="-1" role="dialog" aria-label="myModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-md modal-sm">
        <div class="modal-content ">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-hidden="true"><span class="icon icon-clear"></span></button>
            </div>

            <div class="modal-body" id="delete-success-body">

            </div>
        </div>
    </div>
</div>

<script src="{{ asset('assets/js/jquery/jquery.min.js') }}"></script>
<script src="{{ asset('assets/plugins/bootstrap/js/bootstrap.min.js') }}"></script>
<script src="{{ asset('assets/plugins/elevatezoom/jquery.elevatezoom.js') }}"></script>
<script src="{{ asset('assets/plugins/slick/slick.min.js') }}"></script>
<script src="{{ asset('assets/plugins/perfect-scrollbar/perfect-scrollbar.min.js') }}"></script>
<script src="{{ asset('assets/plugins/panelmenu/panelmenu.js') }}"></script>

<script src="{{ asset('assets/plugins/countdown/jquery.countdown.min.js') }}"></script>
<script src="{{ asset('assets/plugins/rs-plugin/js/jquery.themepunch.tools.min.js') }}"></script>
<script src="{{ asset('assets/plugins/rs-plugin/js/jquery.themepunch.revolution.min.js') }}"></script>
<script src="{{ asset('assets/plugins/magnific-popup/jquery.magnific-popup.min.js') }}"></script>
<script src="{{ asset('assets/js/lazyLoad/lazyload.min.js') }}"></script>
<script src="{{ asset('assets/js/main.js') }}"></script>
<!-- form validation and sending to mail -->
<script src="{{ asset('assets/js/form/jquery.form.js') }}"></script>
<script src="{{ asset('assets/js/form/jquery.validate.min.js') }}"></script>
<script src="{{ asset('assets/js/form/jquery.form-init.js') }}"></script>
<script src="{{ asset('assets/plugins/sweetalert2/sweetalert2.min.js') }}"></script>
<script src="{{ asset('assets/plugins/toastr/toastr.min.js') }}"></script>
<script src="{{ asset('assets/js/custom.js') }}"></script>
<script src="{{ asset('assets/js/fikitech.js') }}"></script>
@yield('external_js')
<script>
    function GetTag(tag_id,sub_tag_id){
        $('#products').html('');
        $('#load-more').html('');
        $('#products').append('<div class="lds-ellipsis"><div></div><div></div><div></div><div></div></div>');

        var data = '{"tag_id":"' + tag_id + '","sub_tag_id":"' + sub_tag_id + '"}';

        var xhttp = new XMLHttpRequest();
        xhttp.onreadystatechange = function() {

            if (this.readyState == 4 && this.status == 200) {
                let response = JSON.parse(this.responseText);
                if (response['result'] == 1) {

                    setTimeout(function () {

                        $('#products').html('');
                        $('#products').append(response['products']);

                        $( "#tag_filter" ).load(window.location.href + " #tag_filter" );
                        $('#sub_tag_filter').html('');
                        $('#sub_tag_filter').append(response['sub_tag_filter']);

                        $('#load-more').append(response['load-more']);

                    }, 500);

                }else{
                    Swal.fire(response['msg']);
                }

            } else if (this.status >= 400 && this.status < 500) {
                let response = JSON.parse(this.responseText);
                $('#loader').addClass("hidden");
                Swal.fire(response['msg']);
            } else if (this.status >= 500) {
                let response = JSON.parse(this.responseText);
                $('#loader').addClass('hidden');
                Swal.fire(response['msg']);

            }
        };
            xhttp.onerror = function onError(e) {

                alert('con error:'+e);
            }

        xhttp.open("POST", "/api/get-tag-products", true);
        xhttp.setRequestHeader("Content-Type", "application/json");
        xhttp.send(data);


    }

    function GetSubTag(tag_id,sub_tag_id){

        $('#products').html('');
        $('#load-more').html('');
        $('#products').append('<div class="lds-ellipsis"><div></div><div></div><div></div><div></div></div>');

        var data = '{"tag_id":"' + tag_id + '","sub_tag_id":"' + sub_tag_id + '"}';

        var xhttp = new XMLHttpRequest();
        xhttp.onreadystatechange = function() {

            if (this.readyState == 4 && this.status == 200) {

                let response = JSON.parse(this.responseText);
                if (response['result'] == 1) {

                    setTimeout(function () {
                        $('#loader').addClass('hidden');

                        $('#products').html('');
                        $('#products').append(response['products']);
                        $( "#tag_filter" ).load(window.location.href + " #tag_filter" );
                        $('#sub_tag_filter').html('');
                        $('#sub_tag_filter').append(response['sub_tag_filter']);

                        $('#load-more').append(response['load-more']);

                    }, 500);

                }else{
                    Swal.fire(response['msg']);
                }
            } else if (this.status >= 400 && this.status < 500) {
                let response = JSON.parse(this.responseText);
                $('#loader').addClass("hidden");
                Swal.fire(response['msg']);
            } else if (this.status >= 500) {
                let response = JSON.parse(this.responseText);
                $('#loader').addClass('hidden');
                Swal.fire(response['msg']);

            }
        };
        xhttp.onerror = function onError(e) {

            alert('con error:'+e);
        }

        xhttp.open("POST", "api/get-sub-tag-products", true);
        xhttp.setRequestHeader("Content-Type", "application/json");
        xhttp.send(data);
    }

    function LoadMore(tag_id,sub_tag_id,start){
        $('#loader').removeClass('hidden');

        var data = '{"tag_id":"' + tag_id + '","sub_tag_id":"' + sub_tag_id + '","start":"' + start + '"}';
        var xhttp = new XMLHttpRequest();
        xhttp.onreadystatechange = function() {

            if (this.readyState == 4 && this.status == 200) {
                let response = JSON.parse(this.responseText);
                if (response['result'] == 1) {

                    setTimeout(function(){
                        $('#loader').addClass("hidden");
                        $('#load-more').html('');
                        $('#load-more').append(response['load-more']);
                        $('#products').append(response['products']);
                    }, 500);



                }else{
                    $('#loader').addClass("hidden");
                    Swal.fire(response['msg']);
                }

            } else if (this.status >= 400 && this.status < 500) {
                let response = JSON.parse(this.responseText);
                $('#loader').addClass("hidden");
                Swal.fire(response['msg']);
            } else if (this.status >= 500) {
                let response = JSON.parse(this.responseText);
                $('#loader').addClass('hidden');
                Swal.fire(response['msg']);

            }
        };
        xhttp.onerror = function onError(e) {

            alert('con error:'+e);
        }

        xhttp.open("POST", "/api/load-more", true);
        xhttp.setRequestHeader("Content-Type", "application/json");
        xhttp.send(data);


    }

    function AddToCart(mri,qty){


        if(qty == null || qty == undefined){

             var qty = parseInt($('#counter-input').val());

        }

        if(qty == 0){

            Swal.fire({
                icon: 'warning',
                title: 'Lütfen üründen kaç adet eklemek istediğinizi seçin.',
                timer: 2000,
                showCancelButton: false,
                showConfirmButton: false
            })
            $('#modalAddToCartProduct').remove();

            return;
        }
        $('#loader').removeClass('hidden');
        $('#add-complete-body').html('');
        $('#add-complete-body').append('<div class="lds-ellipsis"><div></div><div></div><div></div><div></div></div>');


        var data = '{"mri":"' + mri + '","qty":"' + qty + '"}';


        var xhttp = new XMLHttpRequest();
        xhttp.onreadystatechange = function() {

            if (this.readyState == 4 && this.status == 200) {
                let response = JSON.parse(this.responseText);
                if(response['result'] == 1){

                    $('#add-complete-body').html('');
                    $('#add-complete-body').append(response['add_complete_modal']);

                    $('#loader').addClass('hidden');
                    toastr.success('Ürün başarıyla sepetinize eklendi.');

                    $('#shopping-cart-desktop').html('');
                    $('#shopping-cart-desktop').append(response['shopping_cart']);

                    document.getElementById("counter-input").value = response['qty'];

                    $('#quick-view-body').html('');
                    $('#quick-view-body').append(response['quick_view_modal']);

                    $( "#shopping-cart-table" ).load(window.location.href + " #shopping-cart-table" );
                    $( "#shopping-cart-totals" ).load(window.location.href + " #shopping-cart-totals" );


                }else{
                    $('#loader').addClass("hidden");
                    Swal.fire(response['msg']);
                }
            } else if (this.status >= 400 && this.status < 500) {
                let response = JSON.parse(this.responseText);
                $('#loader').addClass("hidden");
                Swal.fire(response['msg']);
            } else if (this.status >= 500) {
                let response = JSON.parse(this.responseText);
                $('#loader').addClass('hidden');
                Swal.fire(response['msg']);

            }
            xhttp.onerror = function onError(e) {

                alert('con error:'+e);
            }
        };

        xhttp.open("POST", "/api/add-to-cart", true);
        xhttp.setRequestHeader("Content-Type", "application/json");
        xhttp.send(data);


    }

    function AddToCartInput(mri){

        var qty = parseInt($('#counter-input').val());

        if(qty > 1000){

            Swal.fire({
                icon: 'warning',
                title: 'Bu üründen en fazla 1000 adet ekleyebilirsiniz.',
                timer: 2000,
                showCancelButton: false,
                showConfirmButton: false
            })
            $('#modalAddToCartProduct').remove();

            return;
        }


        if(qty == 0){

            Swal.fire({
                icon: 'warning',
                title: 'Lütfen üründen kaç adet eklemek istediğinizi seçin.',
                timer: 2000,
                showCancelButton: false,
                showConfirmButton: false
            })
            $('#modalAddToCartProduct').remove();

            return;
        }
        $('#loader').removeClass('hidden');
        $('#add-complete-body').html('');
        $('#add-complete-body').append('<div class="lds-ellipsis"><div></div><div></div><div></div><div></div></div>');


        var data = '{"mri":"' + mri + '","qty":"' + qty +'"}';


        var xhttp = new XMLHttpRequest();
        xhttp.onreadystatechange = function() {

            if (this.readyState == 4 && this.status == 200) {
                let response = JSON.parse(this.responseText);

                if(response['result'] == 1){

                    $('#add-complete-body').html('');
                    $('#add-complete-body').append(response['add_complete_modal']);

                    $('#loader').addClass('hidden');
                    toastr.success('Ürün başarıyla sepetinize eklendi.');

                    $('#shopping-cart-desktop').html('');
                    $('#shopping-cart-desktop').append(response['shopping_cart']);

                    document.getElementById("counter-input").value = response['qty'];

                    $('#quick-view-body').html('');
                    $('#quick-view-body').append(response['quick_view_modal']);

                    $( "#shopping-cart-table" ).load(window.location.href + " #shopping-cart-table" );
                    $( "#shopping-cart-totals" ).load(window.location.href + " #shopping-cart-totals" );


                }else{
                    Swal.fire(response['msg']);
                }
            } else if (this.status >= 400 && this.status < 500) {
                let response = JSON.parse(this.responseText);
                $('#loader').addClass("hidden");
                Swal.fire(response['msg']);
            } else if (this.status >= 500) {
                let response = JSON.parse(this.responseText);
                $('#loader').addClass('hidden');
                Swal.fire(response['msg']);

            }
            xhttp.onerror = function onError(e) {

                alert('con error:'+e);
            }
        };

        xhttp.open("POST", "/api/add-to-cart-input", true);
        xhttp.setRequestHeader("Content-Type", "application/json");
        xhttp.send(data);


    }

    function DeleteItem(model_record_id){

        $('#loader').removeClass('hidden');

        var data = '{"model_record_id":"' + model_record_id + '"}';

        var xhttp = new XMLHttpRequest();
        xhttp.onreadystatechange = function() {

            if (this.readyState == 4 && this.status == 200) {

                let response = JSON.parse(this.responseText);

                if(response['result'] == 1){

                    $('#loader').addClass('hidden');
                    toastr.error('Ürün başarıyla silindi.');

                    $('#shopping-cart-desktop').html('');
                    $('#shopping-cart-desktop').append(response['shopping_cart']);

                    document.getElementById("counter-input").value = response['qty'];
                    $('#quick-view-body').html('');
                    $('#quick-view-body').append(response['quick_view_modal']);

                    if(response['empty_cart'] == true){
                        $( "#shopping-cart-page" ).load(window.location.href + " #shopping-cart-page" );
                    }else{

                        $( "#shopping-cart-table" ).load(window.location.href + " #shopping-cart-table" );
                        $( "#shopping-cart-totals" ).load(window.location.href + " #shopping-cart-totals" );
                    }


                }else{
                    $('#loader').addClass('hidden');
                    Swal.fire(response['msg']);
                }
            } else if (this.status >= 400 && this.status < 500) {
                let response = JSON.parse(this.responseText);
                $('#loader').addClass("hidden");
                Swal.fire(response['msg']);
            } else if (this.status >= 500) {
                let response = JSON.parse(this.responseText);
                $('#loader').addClass('hidden');
                Swal.fire(response['msg']);

            }
            xhttp.onerror = function onError(e) {

                alert('con error:'+e);
            }
        };

        xhttp.open("POST", "/api/delete-item", true);
        xhttp.setRequestHeader("Content-Type", "application/json");
        xhttp.send(data);

    }

    function DeleteItemsModal(model_record_id){

        $("#delete-item").attr("onclick","DeleteItems('"+model_record_id+"')");
        $('#delete-item-modal-text').text("Ürünü silmek istediğinize emin misiniz?");
    }

    function DeleteItems(model_record_id){

        $('#loader').removeClass('hidden');

        var data = '{"model_record_id":"' + model_record_id + '"}';

        var xhttp = new XMLHttpRequest();
        xhttp.onreadystatechange = function() {

            if (this.readyState == 4 && this.status == 200) {

                let response = JSON.parse(this.responseText);

                $("#close-delete-modal").click();
                $('#loader').addClass("hidden");
                if(response['result'] == 1){

                    toastr.error(response['msg']);

                    $('#shopping-cart-desktop').html('');
                    $('#shopping-cart-desktop').append(response['shopping_cart']);

                    $( "#product-detail" ).load(window.location.href + " #product-detail" );

                    if(response['empty_cart'] == true){
                        $( "#shopping-cart-page" ).load(window.location.href + " #shopping-cart-page" );
                    }else{

                        $( "#shopping-cart-table" ).load(window.location.href + " #shopping-cart-table" );
                        $( "#shopping-cart-totals" ).load(window.location.href + " #shopping-cart-totals" );
                    }


                }else{
                    Swal.fire(response['msg']);
                }
            } else if (this.status >= 400 && this.status < 500) {
                let response = JSON.parse(this.responseText);
                $('#loader').addClass("hidden");
                Swal.fire(response['msg']);
            } else if (this.status >= 500) {
                let response = JSON.parse(this.responseText);
                $('#loader').addClass('hidden');
                Swal.fire(response['msg']);

            }
            xhttp.onerror = function onError(e) {

                alert('con error:'+e);
            }
        };

        xhttp.open("POST", "/api/delete-items", true);
        xhttp.setRequestHeader("Content-Type", "application/json");
        xhttp.send(data);

    }

    function QuickView(code){
        $('#quick-view-body').html('');
        $('#quick-view-body').append('<div class="lds-ellipsis"><div></div><div></div><div></div><div></div></div>');

       // var data = '{"code":"' + code + '"}';

        var xhttp = new XMLHttpRequest();
        xhttp.onreadystatechange = function() {

            if (this.readyState == 4 && this.status == 200) {
                let response = JSON.parse(this.responseText);
                $('#loader').addClass("hidden");
                if(response['result'] == 1){

                    $('#quick-view-body').html('');
                    $('#quick-view-body').append(response['modal']);

                }else{
                    Swal.fire(response['msg']);
                }
            } else if (this.status >= 400 && this.status < 500) {
                let response = JSON.parse(this.responseText);
                $('#loader').addClass("hidden");
                Swal.fire(response['msg']);
            } else if (this.status >= 500) {
                let response = JSON.parse(this.responseText);
                $('#loader').addClass('hidden');
                Swal.fire(response['msg']);

            }
            xhttp.onerror = function onError(e) {

                alert('con error:'+e);
            }
        };

        xhttp.open("GET", "/api/quick-view/"+code+"", true);
        xhttp.setRequestHeader("Content-Type", "application/json");
        xhttp.send();

    }

    function AddToFav(model_record_id,key){

        $('#loader').removeClass('hidden');

        var data = '{"model_record_id":"' + model_record_id + '"}';

        var xhttp = new XMLHttpRequest();
        xhttp.onreadystatechange = function() {

            if (this.readyState == 4 && this.status == 200) {
                let response = JSON.parse(this.responseText);
                if(response['result'] == 1){

                    $('#loader').addClass('hidden');

                    $('#wishlist-list').html('');
                    $('#wishlist-list').append(response['fav_div']);
                    $( "#fav-btn-"+key+"" ).addClass("fav");
                    $( "#fav-btn-"+key+"-hm" ).addClass("fav");
                    $( "#fav-btn-qw" ).addClass("fav");
                    document.getElementById("add-wish-text").innerText = response['fav_txt'];

                }else if(response['result'] == 2){

                    $('#loader').addClass('hidden');

                    $('#wishlist-list').html('');
                    $('#wishlist-list').append(response['fav_div']);
                    $( "#fav-btn-"+key+"" ).removeClass("fav");
                    $( "#fav-btn-"+key+"-hm" ).removeClass("fav");
                    $( "#fav-btn-qw" ).removeClass("fav");
                    document.getElementById("add-wish-text").innerText = response['fav_txt'];

                }else{
                    Swal.fire(response['msg']);
                }
            } else if (this.status >= 400 && this.status < 500) {
                let response = JSON.parse(this.responseText);
                $('#loader').addClass("hidden");
                Swal.fire(response['msg']);
            } else if (this.status >= 500) {
                let response = JSON.parse(this.responseText);
                $('#loader').addClass('hidden');
                Swal.fire(response['msg']);

            }
            xhttp.onerror = function onError(e) {

                alert('con error:'+e);
            }
        };

        xhttp.open("POST", "/api/add-to-fav", true);
        xhttp.setRequestHeader("Content-Type", "application/json");
        xhttp.send(data);
    }

    function GetModel(mri,key){

        $('#loader').removeClass('hidden');
        var test = document.getElementsByClassName('wishlist-btn');

        var data = '{"mri":"' + mri + '"}';

        var xhttp = new XMLHttpRequest();
        xhttp.onreadystatechange = function() {

            if (this.readyState == 4 && this.status == 200) {

                let response = JSON.parse(this.responseText);

                if(response['result'] == 1){



                    $('#loader').addClass('hidden');
                    document.getElementById("prd-cm").innerText = response['prd-cm'];
                    $('#image-part').text('');
                    $('#image-part').append(response['product_image_div']);
                    $('#image-part-mobile').text('');
                    $('#image-part-mobile').append(response['product_image_mobile_div']);
                    document.getElementById("prd-pr").innerText = response['prd-pr'];
                    document.getElementById("prd-nm").innerText = response['prd-nm'];
                    document.getElementById("counter-input").value = response['qty'];
                    document.getElementById("pd-add-btn").setAttribute('onclick',"AddToCartInput('"+response['enc-mri']+"')");
                    document.getElementById("pd-delete-btn").setAttribute('onclick',"DeleteItem('"+response['enc-mri']+"',1)");
                    document.getElementById("add-wish-text").innerText = response['fav_txt'];
                    document.getElementById(""+test[0].id+"").id = "fav-btn-"+key;
                    document.getElementById(""+test[0].id+"").setAttribute('onclick',"AddToFav('"+response['enc-mri']+"'," + key + ")");
                    if(response['fav'] != ""){
                        $('#'+test[0].id).addClass(''+response['fav']+'') ;
                    }else{
                        $('#'+test[0].id).removeClass('fav') ;
                    }

                    //  Swal.fire(response['msg']);


                }else{
                    $('#loader').addClass('hidden');
                    Swal.fire(response['msg']);
                }
            } else if (this.status >= 400 && this.status < 500) {
                let response = JSON.parse(this.responseText);
                $('#loader').addClass("hidden");
                Swal.fire(response['msg']);
            } else if (this.status >= 500) {
                let response = JSON.parse(this.responseText);
                $('#loader').addClass('hidden');
                Swal.fire(response['msg']);

            }
            xhttp.onerror = function onError(e) {

                alert('con error:'+e);
            }
        };

        xhttp.open("POST", "/api/get-product-model", true);
        xhttp.setRequestHeader("Content-Type", "application/json");
        xhttp.send(data);
    }

    function AddNewAddress(){
        is_valid = validate_form('new_address_form');
        if (!is_valid) {
            return;
        }
        $('#loader').removeClass('hidden');

        let formData = new FormData();

        $('.form-new-address-fields').each(function () {

            formData.append($(this).attr('name'),$(this).val());

        });
        formData.append('address_type', $('#address_type').find(':selected').val());
        formData.append('city', $('#city').find(':selected').val());
        formData.append('district', $('#district').find(':selected').val());
        formData.append('neighbourhood', $('#neighbourhood').find(':selected').val());



        fetch('{{route('add_new_address')}}', {

            method: "POST",
            body: formData

        })
            .then(response => {
                return response.json();
            })
            .then(data => {
                if (data.result == '1') {

                    $('#loader').addClass('hidden');
                    Swal.fire({
                        icon: 'success',
                        title: data.msg,
                        showConfirmButton: false,
                        outsideClick: false,
                    })

                    window.location.reload();
                }else{

                    $('#loader').addClass('hidden');
                    Swal.fire({
                        icon: 'error',
                        title: 'Ups!',
                        text: data.msg
                    })
                }



            })
            .catch((error) => {
                Swal.fire({
                    icon: 'error',
                    title: error,
                })
            });



    }

    function DeleteAddressModal(address_type,record_id){

        $("#delete-address").attr("onclick","DeleteAddress('"+address_type+"','"+record_id+"')");
        $('#delete-address-modal-text').text("Adresi silmek istediğinize emin misiniz?");
    }

    function DeleteAddress(type,id){

        $('#loader').removeClass('hidden');

        let formData = new FormData();

        formData.append('address_type', type);
        formData.append('record_id', id);



        fetch('{{route('delete_address')}}', {

            method: "POST",
            body: formData

        })
            .then(response => {
                return response.json();
            })
            .then(data => {
                if (data.result == '1') {

                    $('#loader').addClass('hidden');
                    Swal.fire({
                        icon: 'success',
                        title: data.msg,
                        showConfirmButton: false,
                        outsideClick: false,
                    })

                    window.location.reload();
                }else{

                    $('#loader').addClass('hidden');
                    Swal.fire({
                        icon: 'error',
                        title: 'Ups!',
                        text: data.msg
                    })
                }



            })
            .catch((error) => {
                Swal.fire({
                    icon: 'error',
                    title: error,
                })
            });



    }


    function UpdateAddressModal(type,id){
        $('#update-address-body').html('');
        $('#update-address-body').append('<div class="lds-ellipsis"><div></div><div></div><div></div><div></div></div>');

         var data = '{"address_type":"' + type + '","record_id":"' + id + '"}';

        var xhttp = new XMLHttpRequest();
        xhttp.onreadystatechange = function() {

            if (this.readyState == 4 && this.status == 200) {
                let response = JSON.parse(this.responseText);

                if(response['result'] == 1){

                    $('#update-address-body').html('');
                    $('#update-address-body').append(response['modal']);

                }else{
                    Swal.fire(response['msg']);
                }
            } else if (this.status >= 400 && this.status < 500) {
                let response = JSON.parse(this.responseText);
                $('#loader').addClass("hidden");
                Swal.fire(response['msg']);
            } else if (this.status >= 500) {
                let response = JSON.parse(this.responseText);
                $('#loader').addClass('hidden');
                Swal.fire(response['msg']);

            }
            xhttp.onerror = function onError(e) {

                alert('con error:'+e);
            }
        };

        xhttp.open("POST", "/api/update-address-modal", true);
        xhttp.setRequestHeader("Content-Type", "application/json");
        xhttp.send(data);

    }

    function UpdateAddress(){
        is_valid = validate_form('update_address_form');
        if (!is_valid) {
            return;
        }
        $('#loader').removeClass('hidden');

        let formData = new FormData();

        $('.form-update-address-fields').each(function () {

            formData.append($(this).attr('name'),$(this).val());

        });
        formData.append('address_type', $('#address_type').find(':selected').val());
        formData.append('city', $('#city').find(':selected').val());
        formData.append('district', $('#district').find(':selected').val());
        formData.append('neighbourhood', $('#neighbourhood').find(':selected').val());



        fetch('{{route('update_address')}}', {

            method: "POST",
            body: formData

        })
            .then(response => {
                return response.json();
            })
            .then(data => {
                if (data.result == '1') {

                    $('#loader').addClass('hidden');
                    Swal.fire({
                        icon: 'success',
                        title: data.msg,
                        showConfirmButton: false,
                        outsideClick: false,
                    })

                    window.location.reload();
                }else{

                    $('#loader').addClass('hidden');
                    Swal.fire({
                        icon: 'error',
                        title: 'Ups!',
                        text: data.msg
                    })
                }



            })
            .catch((error) => {
                Swal.fire({
                    icon: 'error',
                    title: error,
                })
            });



    }
</script>



</body>
</html>
